<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Trivia Game</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <link href="https://fonts.googleapis.com/css?family=Fahkwang" rel="stylesheet">

</head>

<style>
    body,
    html {
        padding: 0;
        margin: 0;
    }

    .heading {
        height: 100vh;
        width: 100vw;
        /* background-color: yellow; */
        background-image: url('assets/images/bg.jpeg')
    }

    .game-title {
        font-family: 'Fahkwang', sans-serif;
        color: white;
    }

    .underline {
        position: relative;
        top: 4%;
        left: 25%;
        width: 50%;
        border-top: 5px solid white;
        border-radius: 50%/100px 100px 0 0;
    }

    .view {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        height: 650px;
        border-radius: 25px;
    }

    .view-bg {
        position: absolute;
        top: 0;
        background-color: white;
        opacity: .2;
        height: 100%;
        width: 100%;
        z-index: -100;
        border-radius: 25px;
    }

    #startBtn {
        width: 200px;
        height: 80px;
    }

    .list-group-item:hover {
        background-color: blue;
        color: white;
    }

    #time-note {
        visibility: hidden;
        color: white;
    }

    #question {
        color: white;
    }

    h4 {
        color: white;
    }

    #restartBtn {
        width: 40%;
        position: relative;
        top: 0;
        left: 30%;
        height: 65px;
    }

</style>

<body>

    <div class="container-fluid heading">
        <div class="row">
            <div class="col-lg-1"></div>
            <div class="col-lg-10 view">

                <div class="row">
                    <div class="col-lg-12 text-center">
                        <h1 class="display-3 game-title">Rando Trivio</h1>
                        <div class="underline"></div>
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-lg-12 text-center">
                        <h3 id="time-note" class="display-4">Time Remaining: <span id="time"></span> Seconds</h3>
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-lg-12 text-center">
                        <h3 id="question" class="display-4"></h3>
                    </div>
                </div>
                <div class="row mt-1">
                    <div class="col-lg-3"></div>
                    <div id="final" class="col-lg-6 text-center mt-4">
                        <ul id="listing-group" class="list-group text-center"></ul>
                        <button id="startBtn" class="btn btn-primary" onclick="startMe()">Start Game</button>
                    </div>
                    <div class="col-lg-3"></div>
                </div>
                <div class="view-bg"></div>
            </div>
            <div class="col-lg-1"></div>
        </div>
    </div>


</body>

<script>

    //HTML Elements
    var listing = document.getElementById('listing-group');
    var questions = document.getElementById('question');
    var timer = document.getElementById('time');
    var endResults = document.getElementById('final');
    var timeNotation = document.getElementById('time-note');
    var startGame = document.getElementById('startBtn');
    var imgEl = document.createElement('img');

    //Counters
    var index = 0;
    var right = 0;
    var wrong = 0;
    var unAnswered = 0;

    //Current & Comparison  
    var currQuestion;
    var opt;
    var answer;
    var selected;

    //Timer
    var countDown = 10;
    var countD;
    timer.innerHTML = countDown;

    //Functions
    function startMe() {

        startGame.remove() //Gets Rid of new game btn after first game play
        getQuestion()
        timerMe()
    }


    function timerMe() {

        timeNotation.style.visibility = 'visible';
        countD = setInterval(function () {

            countDown--
            if (countDown === 0) { //If out of Time, then below Displays
                unAnswered++
                clearInterval(countD)
                listing.innerHTML = '';
                questions.innerHTML = 'OUT OF TIME! ANSWER: ' + answer;
                imgEl.setAttribute("src", "assets/images/timeout.webp")
                listing.append(imgEl);

                setTimeout(function () {
                    resetMe()
                }, 4000);
            }
            timer.innerHTML = countDown;

        }, 1000);
    }

    function getQuestion() {

        var questions = [
            { q: 'Which fictional city is the home to Batman?', o: ['San Francisco', 'Oakland', 'L.A.', 'Gotham'], a: 'Gotham' },
            { q: 'In which sport would you perform the Fosbury Flop?', o: ['Pole Vault', 'Hammer Throw', 'High Jump', 'Baseball'], a: 'High Jump' },
            { q: 'Spinach is high in which mineral?', o: ['Iron', 'Aluminium', 'Uranium', 'Zinc'], a: 'Iron' },
            { q: 'What is a Geiger Counter used to detect?', o: ['Messy Rooms', 'Radiation', 'Gasoline', 'Carbon Monoxide'], a: 'Radiation' },
            { q: 'Who directed the movie Jaws?', o: ['Brian Griffin', 'Martin Scorsese', 'Steven Spielberg', 'Wes Anderson'], a: 'Steven Spielberg' },
            { q: 'Which part of the body would a chiropodist treat?', o: ['Feet', 'Back', 'Elbows', 'Left Pinky'], a: 'Feet' },
        ]

        currQuestion = questions[index].q;
        opt = questions[index].o;
        answer = questions[index].a;

        renderMe(currQuestion, opt);
    }


    function renderMe(curQ, optArr) {

        questions.innerHTML = curQ;

        for (var i = 0; i < optArr.length; i++) {
            console.log(optArr[i])

            var newEl = document.createElement('li');
            newEl.classList.add("list-group-item");
            newEl.setAttribute("onclick", "compareMe(event)");
            newEl.innerHTML = optArr[i];
            listing.append(newEl);
        }
    }

    function compareMe(event) {

        selected = event.target.innerHTML;

        if (selected === answer) {
            clearInterval(countD)

            right++
            listing.innerHTML = '';
            questions.innerHTML = 'CORRECT!!';
            imgEl.setAttribute("src", "assets/images/correct.webp")
            listing.append(imgEl);

            setTimeout(function () {
                resetMe()
            }, 4000);
        } else {
            console.log('WRONG!')
            clearInterval(countD)

            wrong++
            questions.innerHTML = 'WRONG! CORRECT ANSWER: ' + answer;
            listing.innerHTML = '';
            imgEl.setAttribute("src", "assets/images/wrong.webp")
            listing.append(imgEl);

            setTimeout(function () {
                resetMe()
            }, 4000);
        }
    }

    //Resets after each Question
    function resetMe() {
        if (index >= 5) {
            countDown = 10;
            listing.innerHTML = '';
            questions.innerHTML = 'Final Results';
            var restartButton = document.createElement('button');
            restartButton.setAttribute("onclick", "restartMe()");
            restartButton.setAttribute("class", "btn");
            restartButton.setAttribute("class", "btn-primary");
            restartButton.setAttribute("id", "restartBtn");
            restartButton.innerHTML = 'Start Over?';
            listing.innerHTML = `
            <h4>Correct Answers: ${right}</h4>
            <h4>Incorrect Answers: ${wrong}</h4>
            <h4>Unanswered: ${unAnswered}</h4>
            `
            listing.append(restartButton);
        } else {
            listing.innerHTML = ' ';
            questions.innerHTML = ' ';
            countDown = 10;
            timer.innerHTML = countDown;

            index++

            getQuestion()
            timerMe()
        }

    }

    //Restarts the entire Game after first round
    function restartMe() {

        questions.innerHTML = ' ';
        listing.innerHTML = ' ';
        right = 0;
        wrong = 0;
        unAnswered = 0;
        countDown = 10;
        timer.innerHTML = countDown;
        index = 0;

        getQuestion()
        timerMe()
    }

</script>


<!-- Bootstrap -->

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>

<!-- JQuery -->

</html>